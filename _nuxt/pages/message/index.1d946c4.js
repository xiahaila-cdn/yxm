(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{273:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c}));var r=n(31),o=function(e){var t=e.params,n=e.app;return Object(r.a)({url:"/v1/messages?current=".concat(t.page,"&size=").concat(t.size),method:"GET",app:n})},c=function(e){var t=e.id,n=e.app;return Object(r.a)({url:"/v1/messages/".concat(t),method:"GET",app:n})}},347:function(e,t,n){"use strict";n.r(t);n(42),n(30),n(40),n(49),n(50);var r=n(11),o=n(14),c=(n(48),n(273)),l=n(20);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var m={computed:f(f({},Object(l.c)(["userInfo"])),{},{finishedText:function(){return 0==this.messageList.length?"":"没有更多了"}}),data:function(){return{messageList:[],page:0,size:10,msgLoadState:{loading:!1,finished:!1}}},mounted:function(){},methods:{onLoad:function(){this.page++,this.listMessage()},listMessage:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={page:e.page,size:e.size},t.next=3,Object(c.b)({params:n});case 3:r=t.sent,e.msgLoadState.loading=!1,200!=r.state?(e.$toast({type:"fail",message:r.errMsg,duration:300}),e.msgLoadState.finished=!0):(e.messageList=e.messageList.concat(r.result.records),r.result.current>=r.result.pages&&(e.msgLoadState.finished=!0));case 6:case"end":return t.stop()}}),t)})))()}}},v=n(21),component=Object(v.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("van-nav-bar",{attrs:{title:"消息","left-text":"返回","left-arrow":""},on:{"click-left":function(t){return e.$router.go(-1)}}}),e._v(" "),n("van-list",{attrs:{finished:e.msgLoadState.finished,"finished-text":e.finishedText},on:{load:e.onLoad},model:{value:e.msgLoadState.loading,callback:function(t){e.$set(e.msgLoadState,"loading",t)},expression:"msgLoadState.loading"}},e._l(e.messageList,(function(t){return n("van-cell",{key:t.id,attrs:{label:t.createTime,"is-link":"",center:"",to:"/message/"+t.id},scopedSlots:e._u([{key:"title",fn:function(){return[n("span",{staticClass:"message-title"},[e._v(e._s(t.title))]),e._v(" "),t.isRead?n("van-tag",{attrs:{type:"success"}},[e._v("已读")]):n("van-tag",{attrs:{type:"danger"}},[e._v("未读")])]},proxy:!0}],null,!0)})})),1),e._v(" "),0==e.messageList.length?n("Empty"):e._e()],1)}),[],!1,null,null,null);t.default=component.exports}}]);
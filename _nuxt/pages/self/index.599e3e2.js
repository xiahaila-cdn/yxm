(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{253:function(t,e,r){"use strict";r.d(e,"d",(function(){return o})),r.d(e,"c",(function(){return c})),r.d(e,"a",(function(){return l})),r.d(e,"b",(function(){return d})),r.d(e,"e",(function(){return f})),r.d(e,"f",(function(){return h}));var n=r(31),o=function(t){var e=t.params,r=t.app;return Object(n.a)({url:"/v1/cartoons/tags",method:"GET",data:e,app:r})},c=function(t){var e=t.params,r=t.app;return Object(n.a)({url:"/v1/cartoons",method:"GET",data:e,app:r})},l=function(t,e){return Object(n.a)({url:"/v1/cartoons/".concat(t),method:"GET",app:e})},d=function(t){var e=t.params,r=t.app;return Object(n.a)({url:"/v1/chapters/cartoons/".concat(e.id,"/resume"),method:"GET",data:e,app:r})},f=function(t,e){return Object(n.a)({url:"/v1/cartoons?cartoonName=".concat(t),method:"GET",app:e})},h=function(t,e){return Object(n.a)({url:"/v1/read_records",method:"GET",data:t,app:e})}},293:function(t,e,r){var content=r(321);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(47).default)("17afa58f",content,!0,{sourceMap:!1})},320:function(t,e,r){"use strict";r(293)},321:function(t,e,r){var n=r(46)(!1);n.push([t.i,".shelf_container[data-v-6594c281]{padding-bottom:2rem}.shelf_container .title-tab[data-v-6594c281]{width:5rem}.history_img[data-v-6594c281]{height:2.4rem;width:3.8rem;margin-right:.36rem;border-radius:.28rem}.swip-btn[data-v-6594c281]{height:100%}",""]),t.exports=n},348:function(t,e,r){"use strict";r.r(e);r(42),r(30),r(40),r(49),r(50);var n=r(11),o=r(14),c=(r(48),r(129)),l=r(253),d=r(20);function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var h={name:"bookshelf",data:function(){return{activeTab:"tab-history",historyParam:{page:0,finished:!1,loading:!1},historyCartoonList:[],collectParam:{page:0,loadEnd:!1,loading:!1},collectCartoonList:[],likeData:[]}},components:{Tabbar:c.a},mounted:function(){},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(d.c)(["userInfo"])),methods:{loadHistory:function(){this.historyParam.page++,this.loadMoreHistory()},loadCollect:function(){this.collectParam.page++,this.collectParam.loading=!1},loadMoreCollect:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,n={current:t.collectParam.page},e.next=4,Object(l.f)(n);case 4:if(o=e.sent,t.collectParam.loading=!1,200==o.state){e.next=9;break}return t.collectParam.finished=!0,e.abrupt("return");case 9:o.result.current>=o.result.pages&&(r.collectParam.finished=!0),o.result.records.forEach((function(t){t.ischeck=!1,r.collectCartoonList.push(t)}));case 11:case"end":return e.stop()}}),e)})))()},loadMoreHistory:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,n={current:t.historyParam.page},e.next=4,Object(l.f)(n);case 4:if(o=e.sent,t.historyParam.loading=!1,200==o.state){e.next=9;break}return t.historyParam.finished=!0,e.abrupt("return");case 9:o.result.current>=o.result.pages&&(r.historyParam.finished=!0),o.result.records.forEach((function(t){r.historyCartoonList.push(t)}));case 11:case"end":return e.stop()}}),e)})))()},deleteHistory:function(t){console.log("deleteHistory",t)}}},m=(r(320),r(21)),component=Object(m.a)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"shelf_container"},[r("van-nav-bar",{attrs:{title:"阅读历史","right-text":"编辑","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)}},scopedSlots:t._u([{key:"title",fn:function(){return[r("van-tabs",{staticClass:"title-tab",attrs:{"line-width":"1rem"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[r("van-tab",{attrs:{title:"收藏",name:"tab-collect"}}),t._v(" "),r("van-tab",{attrs:{title:"历史",name:"tab-history"}})],1)]},proxy:!0}])}),t._v(" "),"tab-collect"==t.activeTab?r("div",{attrs:{title:"收藏",name:"tab-collect"}},[r("van-list",{attrs:{finished:t.collectParam.finished},on:{load:t.loadCollect},scopedSlots:t._u([{key:"finished",fn:function(){return[t.userInfo&&t.userInfo.id?r("span",[t._v("到底啦~~")]):t._e()]},proxy:!0}],null,!1,1405500043),model:{value:t.collectParam.loading,callback:function(e){t.$set(t.collectParam,"loading",e)},expression:"collectParam.loading"}},[t._v(" "),t._l(t.collectCartoonList,(function(e){return r("van-cell",{key:e.cartoonId,attrs:{"is-link":"",center:"",title:e.cartoonName,label:"更新到"+e.cartoonCount+"话",to:"/chapter/"+e.chapterId},scopedSlots:t._u([{key:"icon",fn:function(){return[r("ImgLazy",{staticClass:"history_img",attrs:{imgSrc:e.albumPic,altSrc:e.newAlbumPic}})]},proxy:!0},{key:"default",fn:function(){return[t._v("\n          续看第"+t._s(e.chapterIndex)+"话\n        ")]},proxy:!0}],null,!0)})}))],2),t._v(" "),t.collectCartoonList.length?t._e():r("Empty")],1):t._e(),t._v(" "),"tab-history"==t.activeTab?r("div",{attrs:{title:"历史",name:"tab-history"}},[r("van-list",{attrs:{finished:t.historyParam.finished},on:{load:t.loadHistory},scopedSlots:t._u([{key:"finished",fn:function(){return[t.userInfo&&t.userInfo.id?r("span",[t._v("到底啦~~")]):t._e()]},proxy:!0}],null,!1,1405500043),model:{value:t.historyParam.loading,callback:function(e){t.$set(t.historyParam,"loading",e)},expression:"historyParam.loading"}},[t._v(" "),t._l(t.historyCartoonList,(function(e){return r("van-swipe-cell",{key:e.readRecordId,scopedSlots:t._u([{key:"right",fn:function(){return[r("van-button",{staticClass:"swip-btn",attrs:{square:"",type:"danger",text:"删除"},on:{click:function(r){return t.deleteHistory(e.readRecordId)}}})]},proxy:!0}],null,!0)},[t._v(" "),r("van-cell",{key:e.cartoonId,attrs:{"is-link":"",center:"",title:e.cartoonName,label:"更新到"+e.cartoonCount+"话",to:"/chapter/"+e.chapterId},scopedSlots:t._u([{key:"icon",fn:function(){return[r("ImgLazy",{staticClass:"history_img",attrs:{imgSrc:e.albumPic,altSrc:e.newAlbumPic}})]},proxy:!0},{key:"default",fn:function(){return[t._v("\n            续看第"+t._s(e.chapterIndex)+"话\n          ")]},proxy:!0}],null,!0)})],1)}))],2),t._v(" "),t.historyCartoonList.length?t._e():r("Empty")],1):t._e()],1)}),[],!1,null,"6594c281",null);e.default=component.exports}}]);
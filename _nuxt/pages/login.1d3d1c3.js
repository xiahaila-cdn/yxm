(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{291:function(e,r,t){var content=t(317);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,t(47).default)("e0803dcc",content,!0,{sourceMap:!1})},316:function(e,r,t){"use strict";t(291)},317:function(e,r,t){var n=t(46)(!1);n.push([e.i,".head-right{font-size:.6rem}.login-page{background:#fff;height:100vh;padding:2.13333rem 1.92rem 0;text-align:center;color:#999;font-size:.59733rem}.login-page .login-type{display:inline-block;margin:2.13333rem 0 .64rem;font-weight:700}.login-page .toast{text-align:left;margin-bottom:1.28rem}.login-page .mint-cell{border:none;margin-bottom:.64rem}.login-page .mint-cell-wrapper{background-image:none;border:1px solid #d9d9d9}.login-page .get-code{display:inline-block;width:100px;height:45px;line-height:45px}.login-page .login-btn,.login-page .registry-btn{width:100%;margin-top:1rem}",""]),e.exports=n},346:function(e,r,t){"use strict";t.r(r);t(42),t(30),t(40),t(49),t(50);var n=t(11),o=t(14),l=(t(48),t(87)),c=t(84),m=t(20),d=t(121),v=t.n(d);function f(object,e){var r=Object.keys(object);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(object);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),r.push.apply(r,t)}return r}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(r){Object(o.a)(e,r,source[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(source,r))}))}return e}var P={head:{title:"登录"},data:function(){return{activePage:0,textList:["已有账号登录","账号注册"],loginParam:{mobile:"",password:""},registryParam:{nickName:"",mobile:"",password:"",pwdRepate:""}}},computed:{title:function(){return this.textList[this.activePage]},toggleText:function(){return this.textList[~~!this.activePage]}},mounted:function(){this.registryParam.inviteCode=localStorage.getItem("inviteCode"),this.registryParam.registryTimes=parseInt(localStorage.getItem("registryTimes")||0)},methods:y(y({},Object(m.b)(["login"])),{},{closePage:function(){history.length>1?this.$router.go(-1):this.$router.push({path:"/"})},togglePage:function(){this.activePage=~~!this.activePage},registryUser:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var t,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(l.a.tel(e.registryParam.mobile)){r.next=3;break}return Toast("手机号格式不正确"),r.abrupt("return");case 3:if(l.a.required(e.registryParam.password)){r.next=6;break}return Toast("请输入密码"),r.abrupt("return");case 6:if(e.registryParam.pwdRepate==e.registryParam.password){r.next=9;break}return Toast("两次密码不一致"),r.abrupt("return");case 9:return e.registryParam.registryTimes=parseInt(localStorage.getItem("registryTimes")||0),t={username:e.registryParam.mobile,password:v()(e.registryParam.password),nickName:e.registryParam.nickName,inviteCode:e.registryParam.inviteCode,registryTimes:e.registryParam.registryTimes},r.next=13,Object(c.c)({params:t});case 13:200===(n=r.sent).state?(e.login(n.result),Toast(n.result.tipText),localStorage.removeItem("inviteCode"),e.registryParam.registryTimes+=1,localStorage.setItem("registryTimes",parseInt(e.registryParam.registryTimes)),e.activePage=0):Toast(n.errMsg);case 15:case"end":return r.stop()}}),r)})))()},Login:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var t,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(l.a.tel(e.loginParam.mobile)){r.next=3;break}return Toast("手机号格式不正确"),r.abrupt("return");case 3:if(l.a.required(e.loginParam.password)){r.next=6;break}return Toast("请输入密码"),r.abrupt("return");case 6:return t={username:e.loginParam.mobile,password:v()(e.loginParam.password)},r.next=9,Object(c.b)({params:t});case 9:200===(n=r.sent).state?(e.login(n.result),Toast("登录成功,欢迎回来～～～"),setTimeout((function(){e.$router.go(-1)}),300)):Toast(n.errMsg);case 11:case"end":return r.stop()}}),r)})))()}})},h=(t(316),t(21)),component=Object(h.a)(P,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("van-nav-bar",{attrs:{title:e.title},on:{"click-left":e.closePage,"click-right":e.togglePage},scopedSlots:e._u([{key:"left",fn:function(){return[t("van-icon",{attrs:{name:"cross"}})]},proxy:!0},{key:"right",fn:function(){return[t("span",{staticClass:"head-right"},[e._v("\n          "+e._s(e.toggleText)+"\n        ")])]},proxy:!0}])}),e._v(" "),0==e.activePage?t("div",{staticClass:"login-page"},[t("span",{staticClass:"login-type"},[e._v("账号登录")]),e._v(" "),t("van-cell-group",[t("van-field",{attrs:{required:"",clearable:"",placeholder:"请输入用户名"},model:{value:e.loginParam.mobile,callback:function(r){e.$set(e.loginParam,"mobile",r)},expression:"loginParam.mobile"}}),e._v(" "),t("van-field",{attrs:{required:"",clearable:"",type:"password",placeholder:"密码"},model:{value:e.loginParam.password,callback:function(r){e.$set(e.loginParam,"password",r)},expression:"loginParam.password"}})],1),e._v(" "),t("van-button",{staticClass:"login-btn",attrs:{round:"",type:"info"},on:{click:function(r){return e.Login()}}},[e._v("\n      登录\n    ")]),e._v(" "),t("van-button",{staticClass:"registry-btn",attrs:{plain:"",round:"",type:"info"},on:{click:function(r){e.activePage=1}}},[e._v("\n      注册账号\n    ")])],1):t("div",{staticClass:"login-page"},[t("span",{staticClass:"login-type"},[e._v("账号注册")]),e._v(" "),t("van-cell-group",[t("van-field",{attrs:{required:"",clearable:"",placeholder:"请输入昵称"},model:{value:e.registryParam.nickName,callback:function(r){e.$set(e.registryParam,"nickName",r)},expression:"registryParam.nickName"}}),e._v(" "),t("van-field",{attrs:{required:"",clearable:"",placeholder:"请输入手机号",type:"number"},model:{value:e.registryParam.mobile,callback:function(r){e.$set(e.registryParam,"mobile",r)},expression:"registryParam.mobile"}}),e._v(" "),t("van-field",{attrs:{required:"",clearable:"",type:"password",placeholder:"密码"},model:{value:e.registryParam.password,callback:function(r){e.$set(e.registryParam,"password",r)},expression:"registryParam.password"}}),e._v(" "),t("van-field",{attrs:{required:"",clearable:"",type:"password",placeholder:"重复密码"},model:{value:e.registryParam.pwdRepate,callback:function(r){e.$set(e.registryParam,"pwdRepate",r)},expression:"registryParam.pwdRepate"}}),e._v(" "),t("van-field",{attrs:{clearable:"",placeholder:"输入邀请码赢会员"},model:{value:e.registryParam.inviteCode,callback:function(r){e.$set(e.registryParam,"inviteCode",r)},expression:"registryParam.inviteCode"}})],1),e._v(" "),t("van-button",{staticClass:"login-btn",attrs:{round:"",type:"info"},on:{click:e.registryUser}},[e._v("\n      注册\n    ")])],1)],1)}),[],!1,null,null,null);r.default=component.exports}}]);